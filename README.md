# snowman-db
1. Database for Snowman project

&emsp;&emsp; snowman_\*.sql - the file of the main database

2. Добавлен файл fillcountries.sql с хранимой процедурой для добавления списка стран в таблицу country. Чтобы добавить страны, сначала выполните код создания хранимой процедуры, затем запусьтите хранимую процедуру с помощью кода

```
CALL fillcountries();
```

3. При добавлении записи в таблицу booking срабатывает триггер на добавлении записи такде в таблицу invoice с внешним ключом, ссылающимся на запись созднную booking. Также триггер срабатыва при удалении бронирования. Для invoice сделана отдельная таблица с той целью, что хоть сейчас у бронирования один invoice, но если в будущем потребуется изменение, что у бронирования может быть несколько invoice.

4. Чтобы получить значения типов данных как массив, либо как набор строк, можно применить следующие запросы. Вы можете применить полученный таким образом список при создании элементов интерфейса:
```
-- Получить все статусы инвойса как массив
SELECT enum_range(NULL::invoice_status);

-- Получить все статусы инвойса как набор строк
SELECT unnest(enum_range(NULL::invoice_status));
```
```
-- Получить все уровни занятий как массив
SELECT enum_range(NULL::ability_level);

-- Получить все уровни занятий как набор строк
SELECT unnest(enum_range(NULL::ability_level));
```
```
-- Получить все типы курсов как массив
SELECT enum_range(NULL::course_type);

-- Получить все виды курсов как набор строк
SELECT unnest(enum_range(NULL::course_type));
```

5. Таблица с датами уже заполнена, но если потребуется заполнить таблицу с датами набором дат, вы можете выполнить хранимую процедуру, указав в качестве параметров начальную и конечную дату.
```
call fillDates('2025-01-01', '2050-12-31');
```
